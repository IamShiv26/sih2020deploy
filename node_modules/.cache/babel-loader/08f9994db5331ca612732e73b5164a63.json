{"ast":null,"code":"import _classCallCheck from\"/Users/drdevashishojaiswal/Documents/sihfinal/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/drdevashishojaiswal/Documents/sihfinal/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/drdevashishojaiswal/Documents/sihfinal/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/drdevashishojaiswal/Documents/sihfinal/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/drdevashishojaiswal/Documents/sihfinal/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import GoogleLogin from'react-google-login';import axios from'axios';import{Redirect}from'react-router-dom';export var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(){var _getPrototypeOf2;var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Login)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={redirect:false};_this.responseGoogle=function(response){console.log(JSON.stringify(response));var defaultOptions={url:'',method:'POST',// mode: 'cors',\nheaders:{'content-type':'application/json','accept':'application/json'},body:JSON.stringify(response)};fetch(\"https://sih2020backend.herokuapp.com/users/login\",defaultOptions).then(function(res){return res.json();// this.props.history.push('/dashboard'); \n}).then(function(json){console.log(json);localStorage.setItem('token',json.token);_this.setState({redirect:true});});// fetch('https://sih2020backend.herokuapp.com/oauth/callback').then(function(res){\n//     console.log(res);\n// })\n// axios.get('https://sih2020backend.herokuapp.com/oauth/callback')\n//     .then(res => console.log(res.data))\n};return _this;}_createClass(Login,[{key:\"render\",value:function render(){if(this.state.redirect){return React.createElement(Redirect,{to:\"/dashboard\"});}else{return React.createElement(\"div\",null,React.createElement(\"h1\",null,\"Google Login\"),React.createElement(GoogleLogin,{clientId:\"55656516516-1e0kg6fm6vsbu16f3ib37tv4svehtbaf.apps.googleusercontent.com\",buttonText:\"Login\",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,uxMode:\"popup\"// redirectUri=\"http://localhost:3000/dashboard\"\n,cookiePolicy:'single_host_origin'}));}}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/drdevashishojaiswal/Documents/sihfinal/src/components/Login.js"],"names":["React","Component","GoogleLogin","axios","Redirect","Login","state","redirect","responseGoogle","response","console","log","JSON","stringify","defaultOptions","url","method","headers","body","fetch","then","res","json","localStorage","setItem","token","setState"],"mappings":"8oBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAAgC,OAAhC,CACA,MAAOC,CAAAA,WAAP,KAAwB,oBAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CACA,UAAaC,CAAAA,KAAb,2XACIC,KADJ,CACU,CACFC,QAAQ,CAAE,KADR,CADV,OAIIC,cAJJ,CAIqB,SAACC,QAAD,CAAc,CAC3BC,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeJ,QAAf,CAAZ,EAEA,GAAIK,CAAAA,cAAc,CAAG,CACrBC,GAAG,CAAC,EADiB,CAErBC,MAAM,CAAC,MAFc,CAGrB;AACAC,OAAO,CAAC,CACR,eAAgB,kBADR,CAER,SAAU,kBAFF,CAJa,CAQrBC,IAAI,CAACN,IAAI,CAACC,SAAL,CAAeJ,QAAf,CARgB,CAArB,CAWAU,KAAK,CAAC,kDAAD,CAAqDL,cAArD,CAAL,CAA0EM,IAA1E,CAA+E,SAACC,GAAD,CAAO,CAClF,MAAOA,CAAAA,GAAG,CAACC,IAAJ,EAAP,CACA;AAEH,CAJD,EAIGF,IAJH,CAIQ,SAAAE,IAAI,CAAI,CACZZ,OAAO,CAACC,GAAR,CAAYW,IAAZ,EACAC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,IAAI,CAACG,KAAnC,EACA,MAAKC,QAAL,CAAc,CAACnB,QAAQ,CAAC,IAAV,CAAd,EACH,CARD,EAUA;AACA;AACA;AAEA;AACA;AACD,CAlCP,wEAmCc,CACN,GAAG,KAAKD,KAAL,CAAWC,QAAd,CAAuB,CACnB,MAAQ,qBAAC,QAAD,EAAU,EAAE,CAAC,YAAb,EAAR,CACH,CAFD,IAGI,CACA,MACI,gCACI,6CADJ,CAEI,oBAAC,WAAD,EACI,QAAQ,CAAC,yEADb,CAEI,UAAU,CAAC,OAFf,CAGI,SAAS,CAAE,KAAKC,cAHpB,CAII,SAAS,CAAE,KAAKA,cAJpB,CAKI,MAAM,CAAG,OACT;AANJ,CAOI,YAAY,CAAE,oBAPlB,EAFJ,CADJ,CAiBH,CAEF,CA3DP,mBAA2BP,SAA3B,EA8DA,cAAeI,CAAAA,KAAf","sourcesContent":["import React,{ Component } from 'react';\nimport GoogleLogin from 'react-google-login';\nimport axios from 'axios';\nimport {Redirect} from 'react-router-dom';\nexport class Login extends Component {\n    state={\n        redirect :false\n    }\n    responseGoogle = (response) => {\n        console.log(JSON.stringify(response));\n        \n        let defaultOptions = {\n        url:'',\n        method:'POST',\n        // mode: 'cors',\n        headers:{\n        'content-type': 'application/json',\n        'accept': 'application/json'\n        },\n        body:JSON.stringify(response),\n        };\n    \n        fetch(\"https://sih2020backend.herokuapp.com/users/login\", defaultOptions).then((res)=>{\n            return res.json();\n            // this.props.history.push('/dashboard'); \n            \n        }).then(json => {\n            console.log(json);\n            localStorage.setItem('token', json.token);\n            this.setState({redirect:true});\n        })\n\n        // fetch('https://sih2020backend.herokuapp.com/oauth/callback').then(function(res){\n        //     console.log(res);\n        // })\n\n        // axios.get('https://sih2020backend.herokuapp.com/oauth/callback')\n        //     .then(res => console.log(res.data))\n      }\n      render(){\n        if(this.state.redirect){\n            return (<Redirect to=\"/dashboard\" />)\n        }\n        else{\n            return (\n                <div>\n                    <h1>Google Login</h1>\n                    <GoogleLogin\n                        clientId=\"55656516516-1e0kg6fm6vsbu16f3ib37tv4svehtbaf.apps.googleusercontent.com\"\n                        buttonText=\"Login\"\n                        onSuccess={this.responseGoogle}\n                        onFailure={this.responseGoogle}\n                        uxMode = 'popup'\n                        // redirectUri=\"http://localhost:3000/dashboard\"\n                        cookiePolicy={'single_host_origin'}\n                    />\n                    {/* if (isSignedIn) {\n                        <Redirect to=\"/dashboard\" /> \n                    }                */}\n                </div>\n            )\n        }\n    \n      }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}